# Модель подсистемы премиум подписок для образовательной платформы

## Требования

Речь идет о некоторой образовательной платформе, на которой пользователи (студенты) могут покупать доступ 
к различному функционалу (продуктам). Основными типами продуктов являются образовательные курсы (по некоторым предметам) 
и обучающие игры. 

Нужная гибкая модель для подсистемы премиум подписок, которая будет позволять:
* продавать подписки на некоторый срок или бессрочно
* задавать различные цены для различных периодов подписки (цена не высчитывается пропорционально сроку)
* продавать наборы продуктов (цена набора не равна сумме цен отдельных продуктов)
* задавать различные цены на различные продукты или наборы продуктов для различных групп пользователей
* проводить ab-тесты в рамках определенных продуктов и сегментов пользователей


## Результат моделирования

Для моделирования и проверки работоспособности модели создано простое rails приложение. View нет, только model. 
Проверка работоспособности - через rspec: `bundle exec rake`

Цельное представление о работе модели можно получить, прочитав [спек](spec/models/scenarios_spec.rb). 
Легко представить, как переложить соответствующий функционал на административный Web UI.


## Краткое описание модели

[Диаграмма](doc/model_diagram.png)


### Subject - Предмет

Играет вспомогательную роль, как связующее звено между продуктами и курсами. 
В будущем, думаю, могут быть различные продукты для различных курсов одного и того же предмета.


### Product - Продукт

Продукт может принадлежать предмету.


### SubscriptionPeriod - Период подписки

Периоды, на которые мы продаем подписку.
Примеры: месяц, год, до 31го мая, бессрочная.


### Bundle - Бандл (Пакет)

Это то, что продается. В бандле может один или несколько элементов - BundleItem.


### BundleItem - Элемент бандла

Представляет собой комбинацию продукта и периода подписки.


### Offer - Ценовое предложение

На один и тот же бандл может быть одно и более ценовое предложение. 
Ценовое предложение задает цену на бандл для определенного сегмента пользователей.


### Segment - Сегмент пользователей

Некоторое подмножество учеников. Возможны различные фильтры.


### Student - Ученик

Он самый.


### Order - Заказ

Заказ создается в момент, когда пользователь решает купить некоторый бандл. 
Чтобы получить доступ к продуктам бандла пользователь должен оплатить заказ.


### Payment - Платеж

Платеж создается на основании информации, поступающей от платежной платформы. 
В результате соответствующий заказ помечается как оплаченный 
и ученику предоставляется доступ к продуктам бандла.


### Subscription - Подписка

Подписка отражает факт наличия доступа ученика к определенному продукту и срок этого доступа.
